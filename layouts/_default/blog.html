{{ define "styles" }}

{{ with resources.Get "styles/style.css" | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}">
  {{ end }}

  {{ with resources.Get "styles/blog.css" | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}">
  {{ end }}
{{ end }}

{{ define "main" }}

<h1 class="blog-title">Blog</h1>


<div class="blog-container">

  <!-- Coluna de posts -->
  <div class="blog-posts">
    {{ $i := 0 }} <!-- contador para anúncios -->
    {{ range .Pages }}
      <article class="blog-card">
        <!-- Imagem com overlay -->
        <div class="blog-card-image-wrapper">
          <a href="{{ .RelPermalink }}">
            {{ with .Params.featuredImage }}
              <img class="blog-card-image" src="{{ . }}" alt="{{ $.Title }}">
            {{ end }}
            <div class="blog-card-overlay">
              <p>Categoria: {{ index .Params.categories 0 }}</p>
              <p>Data de publicação: {{ .Date.Format "02/01/2006" }}</p>
              {{ with .Lastmod }}
                <p>Última atualização: {{ .Format "02/01/2006" }}</p>
              {{ end }}
            </div>
          </a>
        </div>

        <!-- Título e descrição fora da imagem -->
        <div class="blog-card-text">
          <h2>{{ .Title }}</h2>
          <p>{{ .Description }}</p>
        </div>
      </article>

      {{ $i = add $i 1 }}

      <!-- Inserir anúncio a cada 4 posts -->
      {{ if eq (mod $i 4) 0 }}
        <div class="blog-ad">
          <ins class="adsbygoogle"
               style="display:block; max-width:970px; width:100%; height:90px;"
               data-ad-client="ca-pub-XXXXXX" 
               data-ad-slot="YYYYYY"></ins>
          <script>
               (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
        </div>
      {{ end }}

    {{ end }}

    <!-- Mensagem caso não haja posts -->
    {{ if not (len .Pages) }}
      <p>Nenhum post encontrado.</p>
    {{ end }}
  </div>

  <!-- Sidebar -->
  {{ partial "sidebar.html" . }}


</div>

<!-- Paginação -->
<div class="blog-pagination">
  {{ template "_internal/pagination.html" . }}
</div>

{{ end }}
